setwd("~/path/to/Data_Programming_Group_Project")
getwd
getwd()
gert::git_pull()
library(tidyverse)
library(ggplot2)
big_municipalities <- election_data %>%
filter(census > 100000) %>%
mutate(partido = case_when(
partido %in% c("PSOE variations") ~ "PSOE",
partido %in% c("PP variations") ~ "PP",
# Other party recodings
TRUE ~ "OTHER"
))
setwd("~/path/to/Data_Programming_Group_Project")
setwd("C:/Users/Casper/Desktop/")
setwd("C:/Users/Casper/Desktop/group (1)/group/Data_Programming_Group_Project.git/R")
gert::git_pull()
election_data <- readRDS("election_data.rds")
getwd()
setwd("C:\Users\Casper\Desktop\group (1)\group")
setwd("C:/Users/Casper/Desktop/group (1)/group")
election_data <- readRDS("election_data.rds")
election_data <- readRDS("election_data.rds")
survey_data <- readRDS("survey.rds")
election_data <- read.csv("election_data_short.csv")
big_municipalities <- election_data %>%
filter(census > 100000) %>%
mutate(partido = case_when(
partido %in% c("PSOE variations") ~ "PSOE",
partido %in% c("PP variations") ~ "PP",
# Other party recodings
TRUE ~ "OTHER"
))
election_data <- read.csv("election_data_short.csv")
election_data <- read.csv("C:\Users\Casper\Desktop\group (1)\group")
election_data <- read.csv("C:/Users/Casper/Desktop/group (1)/group/Data_Programming_Group_Project.git/group/election_data_short.csv")
big_municipalities <- election_data %>%
filter(census > 100000) %>%
mutate(partido = case_when(
partido %in% c("PSOE variations") ~ "PSOE",
partido %in% c("PP variations") ~ "PP",
TRUE ~ "OTHER"
))
View(election_data)
head(election_data)
str(election_data)
colnames(election_data)
Sys.setlocale("LC_ALL", "en_US.UTF-8")
setwd("C:/Users/Casper/Desktop/group (1)/group")
gert::git_pull()
election_data <- read.csv("C:/Users/Casper/Desktop/group (1)/group/Data_Programming_Group_Project.git/group/election_data_short.csv")
big_municipalities <- election_data %>%
filter(censo > 100000) %>%
mutate(partido = case_when(
partido %in% c("PSOE variations") ~ "PSOE",
partido %in% c("PP variations") ~ "PP",
TRUE ~ "OTHER"
))
colnames(election_data)
big_municipalities <- election_data %>%
filter(censo > 100000) %>%
mutate(party = case_when(
grepl("PARTIDO.SOCIALISTA", names(election_data)) ~ "PSOE",
grepl("PARTIDO.POPULAR", names(election_data)) ~ "PP",
grepl("UNIDAS.PODEMOS|PODEMOS", names(election_data)) ~ "PODEMOS",
grepl("CIUDADANOS", names(election_data)) ~ "CIUDADANOS",
grepl("VOX", names(election_data)) ~ "VOX",
grepl("ESQUERRA.REPUBLICANA", names(election_data)) ~ "ERC",
grepl("EUSKO.ALDERDI", names(election_data)) ~ "PNV",
grepl("BLOQUE.NACIONALISTA.GALEGO", names(election_data)) ~ "BNG",
TRUE ~ "OTHER"
))
big_municipalities <- election_data %>%
filter(censo > 100000)
View(big_municipalities)
big_municipalities %>%
pivot_longer(
cols = starts_with("PARTIDO"),
names_to = "party",
values_to = "votes"
)
big_municipalities<- big_municipalities %>%
pivot_longer(
cols = starts_with("PARTIDO"),
names_to = "party",
values_to = "votes"
)
big_municipalities <- big_municipalities  %>%
mutate(party = case_when(
grepl("SOCIALISTA", party, ignore.case = TRUE) ~ "PSOE",
grepl("POPULAR", party, ignore.case = TRUE) ~ "PP",
grepl("PODEMOS|UNIDAS", party, ignore.case = TRUE) ~ "PODEMOS",
grepl("CIUDADANOS", party, ignore.case = TRUE) ~ "CIUDADANOS",
grepl("VOX", party, ignore.case = TRUE) ~ "VOX",
grepl("ESQUERRA", party, ignore.case = TRUE) ~ "ERC",
grepl("EUSKO", party, ignore.case = TRUE) ~ "PNV",
grepl("BLOQUE.NACIONALISTA", party, ignore.case = TRUE) ~ "BNG",
TRUE ~ "OTHER"
))
winners <- big_municipalities %>%
group_by(codigo_municipio, anno, party) %>%
summarise(total_votes = sum(votes, na.rm = TRUE), .groups = "drop") %>%
group_by(codigo_municipio, anno) %>%
slice_max(total_votes, n = 1)
View(winners)
print(winners)
ggplot(winners, aes(x = anno, fill = party)) +
geom_bar(position = "dodge") +
labs(title = "Winning Parties in Municipalities with >100,000 Habitants",
x = "Year", y = "Number of Municipalities", fill = "Party") +
theme_minimal()
winners_plot <- ggplot(winners, aes(x = anno, fill = party)) +
geom_bar(position = "dodge") +
labs(title = "Winning Parties in Municipalities with >100,000 Habitants",
x = "Year", y = "Number of Municipalities", fill = "Party") +
theme_minimal()
print(winners_plot)
gert::git_add(".")
gert::git_info()
getwd()
setwd("C:/Users/Casper/Desktop/group (1)/group")
gert::git_pull()
setwd("C:/Users/Casper/Desktop/group (1)/group/Data_Programming_Group_Project.git")
gert::git_pull()
election_data <- read.csv("C:/Users/Casper/Desktop/group (1)/group/Data_Programming_Group_Project.git/group/election_data_short.csv")
big_municipalities <- election_data %>%
filter(censo > 100000)
big_municipalities<- big_municipalities %>%
pivot_longer(
cols = starts_with("PARTIDO"),
names_to = "party",
values_to = "votes"
)
big_municipalities <- big_municipalities  %>%
mutate(party = case_when(
grepl("SOCIALISTA", party, ignore.case = TRUE) ~ "PSOE",
grepl("POPULAR", party, ignore.case = TRUE) ~ "PP",
grepl("PODEMOS|UNIDAS", party, ignore.case = TRUE) ~ "PODEMOS",
grepl("CIUDADANOS", party, ignore.case = TRUE) ~ "CIUDADANOS",
grepl("VOX", party, ignore.case = TRUE) ~ "VOX",
grepl("ESQUERRA", party, ignore.case = TRUE) ~ "ERC",
grepl("EUSKO", party, ignore.case = TRUE) ~ "PNV",
grepl("BLOQUE.NACIONALISTA", party, ignore.case = TRUE) ~ "BNG",
TRUE ~ "OTHER"
))
winners <- big_municipalities %>%
group_by(codigo_municipio, anno, party) %>%
summarise(total_votes = sum(votes, na.rm = TRUE), .groups = "drop") %>%
group_by(codigo_municipio, anno) %>%
slice_max(total_votes, n = 1)
print(winners)
winners_plot <- ggplot(winners, aes(x = anno, fill = party)) +
geom_bar(position = "dodge") +
labs(title = "Winning Parties in Municipalities",
x = "Year", y = "Number of Municipalities", fill = "Party") +
theme_minimal()
print(winners_plot)
gert::git_add(".")
gert::git_commit(message = "I uploaded first question")
gert::git_push()
Sys.setlocale("LC_ALL", "en_US.UTF-8")
setwd("C:/Users/Casper/Desktop/group (1)/group/Data_Programming_Group_Project.git")
gert::git_pull()
election_data <- read.csv("C:/Users/Casper/Desktop/group (1)/group/Data_Programming_Group_Project.git/group/election_data_short.csv")
regional_results <- big_municipalities %>%
group_by(codigo_ccaa, anno, party) %>%
summarise(total_municipalities = n(), .groups = "drop")
View(regional_results)
spain_map <- st_read("spain_map.geojson")
install.packages("sf")
library(sf)
spain_map <- st_read("spain_map.geojson")
regional_summary <- big_municipalities %>%
group_by(codigo_ccaa, party) %>%
summarise(total_municipalities = n(), .groups = "drop") %>%
arrange(desc(total_municipalities))
View(regional_summary)
ggplot(regional_results, aes(x = anno, y = total_municipalities, color = party)) +
geom_line(size = 1.2) +
facet_wrap(~codigo_ccaa) +  # Her bölge için ayrı grafik
labs(title = "Zaman İçinde Partilerin Bölgesel Performansı",
x = "Yıl", y = "Belediye Sayısı", color = "Parti") +
theme_minimal()
ggplot(regional_results, aes(x = anno, y = total_municipalities, color = party)) +
geom_line(linewidth= 1.2) +
facet_wrap(~codigo_ccaa) +
labs(title = "Zaman İçinde Partilerin Bölgesel Performansı",
x = "Yıl", y = "Belediye Sayısı", color = "Parti") +
theme_minimal()
ggplot(regional_results, aes(x = anno, y = total_municipalities, color = party)) +
geom_line(linewidth = 1.2) +
facet_wrap(~codigo_ccaa) +
labs(title = "Regional Performance of Parties Over Time",
x = "Year", y = "Number of Municipalities", color = "Party") +
theme_minimal()
gert::git_add(".")
gert::git_push()
gert::git_commit(message = "I uploaded first question")
gert::git_push()
gert::git_push()
gert::git_commit(message = "I uploaded first question")
gert::git_push()
library(tidyverse)
library(ggplot2)
Sys.setlocale("LC_ALL", "en_US.UTF-8")
setwd("C:/Users/Casper/Desktop/group (1)/group/Data_Programming_Group_Project.git")
gert::git_pull()
election_data <- read.csv("C:/Users/Casper/Desktop/group (1)/group/Data_Programming_Group_Project.git/group/election_data_short.csv")
big_municipalities <- election_data |>
filter(censo > 100000)
big_municipalities<- big_municipalities |>
pivot_longer(
cols = starts_with("PARTIDO"),
names_to = "party",
values_to = "votes"
)
big_municipalities <- big_municipalities  %>%
mutate(party = case_when(
grepl("SOCIALISTA", party, ignore.case = TRUE) ~ "PSOE",
grepl("POPULAR", party, ignore.case = TRUE) ~ "PP",
grepl("PODEMOS|UNIDAS", party, ignore.case = TRUE) ~ "PODEMOS",
grepl("CIUDADANOS", party, ignore.case = TRUE) ~ "CIUDADANOS",
grepl("VOX", party, ignore.case = TRUE) ~ "VOX",
grepl("ESQUERRA", party, ignore.case = TRUE) ~ "ERC",
grepl("EUSKO", party, ignore.case = TRUE) ~ "PNV",
grepl("BLOQUE.NACIONALISTA", party, ignore.case = TRUE) ~ "BNG",
TRUE ~ "OTHER"
))
winners <- big_municipalities |>
group_by(codigo_municipio, anno, party) |>
summarise(total_votes = sum(votes, na.rm = TRUE), .groups = "drop") %>%
group_by(codigo_municipio, anno) |>
slice_max(total_votes, n = 1)
print(winners)
winners_plot <- ggplot(winners, aes(x = anno, fill = party)) +
geom_bar(position = "dodge") +
labs(title = "Winning Parties in Municipalities",
x = "Year", y = "Number of Municipalities", fill = "Party") +
theme_minimal()
print(winners_plot)
#maybe we can add regional analysis
regional_summary <- big_municipalities |>
group_by(codigo_ccaa, party) |>
summarise(total_municipalities = n(), .groups = "drop") |>
arrange(desc(total_municipalities))
ggplot(regional_results, aes(x = anno, y = total_municipalities, color = party)) +
geom_line(linewidth = 1.2) +
facet_wrap(~codigo_ccaa) +
labs(title = "Regional Performance of Parties Over Time",
x = "Year", y = "Number of Municipalities", color = "Party") +
theme_minimal()
gert::git_add(".")
gert::git_commit(message = "I uploaded first question")
gert::git_push()
library(tidyverse)
library(ggplot2)
election_data <- readRDS("C:\Users\Casper\Desktop\group (1)\group\Data_Programming_Group_Project.git\data\processed")
survey_data <- readRDS("C:/Users/Casper/Desktop/group (1)/group/Data_Programming_Group_Project.git/data/processed")
list.files("C:/Users/Casper/Desktop/group (1)/group/Data_Programming_Group_Project.git/data/processed")
surveys <- readRDS("C:/Users/Casper/Desktop/group (1)/group/Data_Programming_Group_Project.git/data/processed/surveys.rds")
View(surveys)
election_data <- readRDS("C:/Users/Casper/Desktop/group (1)/group/Data_Programming_Group_Project.git/data/processed/election_data.rds")
View(election_data)
View(election_data)
View(election_data)
View(election_data)
View(election_data)
View(election_data)
big_municipalities <- election_data |>
filter(censo > 100000)
View(big_municipalities)
big_municipalities<- big_municipalities |>
pivot_longer(
cols = starts_with("PARTIDO"),
names_to = "party",
values_to = "votes"
)
big_municipalities <- big_municipalities  %>%
mutate(party = case_when(
grepl("SOCIALISTA", party, ignore.case = TRUE) ~ "PSOE",
grepl("POPULAR", party, ignore.case = TRUE) ~ "PP",
grepl("PODEMOS|UNIDAS", party, ignore.case = TRUE) ~ "PODEMOS",
grepl("CIUDADANOS", party, ignore.case = TRUE) ~ "CIUDADANOS",
grepl("VOX", party, ignore.case = TRUE) ~ "VOX",
grepl("ESQUERRA", party, ignore.case = TRUE) ~ "ERC",
grepl("EUSKO", party, ignore.case = TRUE) ~ "PNV",
grepl("BLOQUE.NACIONALISTA", party, ignore.case = TRUE) ~ "BNG",
TRUE ~ "OTHER"
))
winners <- big_municipalities |>
group_by(codigo_municipio, anno, party) |>
summarise(total_votes = sum(votes, na.rm = TRUE), .groups = "drop") %>%
group_by(codigo_municipio, anno) |>
slice_max(total_votes, n = 1)
str(big_municipalities)
winners <- big_municipalities |>
group_by(codigo_municipio, anno, party) |>
summarise(total_votes = sum(num_votos, na.rm = TRUE), .groups = "drop") %>%
group_by(codigo_municipio, anno) |>
slice_max(total_votes, n = 1)
print(winners)
winners_plot <- ggplot(winners, aes(x = anno, fill = party)) +
geom_bar(position = "dodge") +
labs(title = "Winning Parties in Municipalities",
x = "Year", y = "Number of Municipalities", fill = "Party") +
theme_minimal()
print(winners_plot)
View(winners)
unique(big_municipalities$party)
election_data <- readRDS("C:/Users/Casper/Desktop/group (1)/group/Data_Programming_Group_Project.git/data/processed/election_data.rds")
big_municipalities <- election_data |>
filter(censo > 100000)
big_municipalities <- election_data|>
filter(censo > 100000)
winners <- big_municipalities |>
group_by(codigo_municipio, anno, partido) |>
summarise(total_votes = sum(num_votos, na.rm = TRUE), .groups = "drop") %>%
group_by(codigo_municipio, anno) |>
slice_max(total_votes, n = 1)
print(winners)
winners_plot <- ggplot(winners, aes(x = anno, fill = party)) +
geom_bar(position = "dodge") +
labs(title = "Winning Parties in Municipalities",
x = "Year", y = "Number of Municipalities", fill = "Party") +
theme_minimal()
print(winners_plot)
winners_plot <- ggplot(winners, aes(x = anno, fill = partido)) +
geom_bar(position = "dodge") +
labs(title = "Winning Parties in Municipalities",
x = "Year", y = "Number of Municipalities", fill = "Partido") +
theme_minimal()
print(winners_plot)
unique(big_municipalities$partido
)
print(winners)
#maybe we can add regional analysis
regional_summary <- big_municipalities |>
group_by(codigo_ccaa, partido) |>
summarise(total_municipalities = n(), .groups = "drop") |>
arrange(desc(total_municipalities))
winners <- big_municipalities |>
group_by(codigo_municipio, anno, partido_2) |>
summarise(total_votes = sum(num_votos, na.rm = TRUE), .groups = "drop") %>%
group_by(codigo_municipio, anno) |>
slice_max(total_votes, n = 1)
print(winners)
winners_plot <- ggplot(winners, aes(x = anno, fill = partido_2)) +
geom_bar(position = "dodge") +
labs(title = "Winning Parties in Municipalities",
x = "Year", y = "Number of Municipalities", fill = "Partido") +
theme_minimal()
winners_plot <- ggplot(winners, aes(x = anno, fill = partido_2)) +
geom_bar(position = "dodge") +
labs(title = "Winning Parties in Municipalities",
x = "Year", y = "Number of Municipalities", fill = "Partido_2") +
theme_minimal()
print(winners_plot)
#maybe we can add regional analysis
regional_summary <- big_municipalities |>
group_by(codigo_ccaa, partido) |>
summarise(total_municipalities = n(), .groups = "drop") |>
arrange(desc(total_municipalities))
winners_plot <- ggplot(winners, aes(x = anno, fill = partido_2)) +
geom_bar(position = "dodge") +
labs(title = "Winning Parties in Municipalities",
x = "Year", y = "Number of Municipalities", fill = "Party") +
theme_minimal()
print(winners_plot)
#maybe we can add regional analysis
regional_summary <- big_municipalities |>
group_by(codigo_ccaa, partido) |>
summarise(total_municipalities = n(), .groups = "drop") |>
arrange(desc(total_municipalities))
ggplot(regional_results, aes(x = anno, y = total_municipalities, color = partido)) +
geom_line(linewidth = 1.2) +
facet_wrap(~codigo_ccaa) +
labs(title = "Regional Performance of Parties Over Time",
x = "Year", y = "Number of Municipalities", color = "Party") +
theme_minimal()
ggplot(regional_summary, aes(x = anno, y = total_municipalities, color = partido)) +
geom_line(linewidth = 1.2) +
facet_wrap(~codigo_ccaa) +
labs(title = "Regional Performance of Parties Over Time",
x = "Year", y = "Number of Municipalities", color = "Party") +
theme_minimal()
View(regional_summary)
#maybe we can add regional analysis
regional_summary <- big_municipalities |>
group_by(codigo_ccaa, partido_2, anno) |>
summarise(total_municipalities = n(), .groups = "drop") |>
arrange(desc(total_municipalities))
ggplot(regional_summary, aes(x = anno, y = total_municipalities, color = partido)) +
geom_line(linewidth = 1.2) +
facet_wrap(~codigo_ccaa) +
labs(title = "Regional Performance of Parties Over Time",
x = "Year", y = "Number of Municipalities", color = "Party") +
theme_minimal()
ggplot(regional_summary, aes(x = anno, y = total_municipalities, color = partido_2)) +
geom_line(linewidth = 1.2) +
facet_wrap(~codigo_ccaa) +
labs(title = "Regional Performance of Parties Over Time",
x = "Year", y = "Number of Municipalities", color = "Party") +
theme_minimal()
library(tidyverse)
library(ggplot2)
Sys.setlocale("LC_ALL", "en_US.UTF-8")
setwd("C:/Users/Casper/Desktop/group (1)/group/Data_Programming_Group_Project.git")
gert::git_pull()
election_data <- readRDS("C:/Users/Casper/Desktop/group (1)/group/Data_Programming_Group_Project.git/data/processed/election_data.rds")
big_municipalities <- election_data|>
filter(censo > 100000)
library(tidyverse)
library(ggplot2)
Sys.setlocale("LC_ALL", "en_US.UTF-8")
setwd("C:/Users/Casper/Desktop/group (1)/group/Data_Programming_Group_Project.git")
gert::git_pull()
election_data <- readRDS("C:/Users/Casper/Desktop/group (1)/group/Data_Programming_Group_Project.git/data/processed/election_data.rds")
big_municipalities <- election_data|>
filter(censo > 100000)
rlang::last_trace()
View(election_data)
big_municipalities <- election_data|>
filter(censo > 100000)
big_municipalities<- big_municipalities |>
pivot_longer(
cols = starts_with("PARTIDO"),
names_to = "party",
values_to = "votes"
)
library(tidyverse)
library(ggplot2)
Sys.setlocale("LC_ALL", "en_US.UTF-8")
setwd("C:/Users/Casper/Desktop/group (1)/group/Data_Programming_Group_Project.git")
gert::git_pull()
election_data <- readRDS("C:/Users/Casper/Desktop/group (1)/group/Data_Programming_Group_Project.git/data/processed/election_data.rds")
big_municipalities <- election_data|>
filter(censo > 100000)
big_municipalities <- election_data|>
filter(censo > 100000)
big_municipalities<- big_municipalities |>
pivot_longer(
cols = starts_with("PARTIDO"),
names_to = "party",
values_to = "votes"
)
winners <- big_municipalities |>
group_by(codigo_municipio, anno, partido) |>
summarise(total_votes = sum(num_votos, na.rm = TRUE), .groups = "drop") %>%
group_by(codigo_municipio, anno) |>
slice_max(total_votes, n = 1)
big_municipalities <- election_data|>
filter(censo > 100000)
winners <- big_municipalities |>
group_by(codigo_municipio, anno, partido) |>
summarise(total_votes = sum(num_votos, na.rm = TRUE), .groups = "drop") %>%
group_by(codigo_municipio, anno) |>
slice_max(total_votes, n = 1)
print(winners)
winners_plot <- ggplot(winners, aes(x = anno, fill = partido_2)) +
geom_bar(position = "dodge") +
labs(title = "Winning Parties in Municipalities",
x = "Year", y = "Number of Municipalities", fill = "Party") +
theme_minimal()
print(winners_plot)
library(tidyverse)
library(ggplot2)
Sys.setlocale("LC_ALL", "en_US.UTF-8")
setwd("C:/Users/Casper/Desktop/group (1)/group/Data_Programming_Group_Project.git")
gert::git_pull()
election_data <- readRDS("C:/Users/Casper/Desktop/group (1)/group/Data_Programming_Group_Project.git/data/processed/election_data.rds")
winners <- big_municipalities |>
group_by(codigo_municipio, anno, partido_2) |>
summarise(total_votes = sum(num_votos, na.rm = TRUE), .groups = "drop") %>%
group_by(codigo_municipio, anno) |>
slice_max(total_votes, n = 1)
print(winners)
winners_plot <- ggplot(winners, aes(x = anno, fill = partido_2)) +
geom_bar(position = "dodge") +
labs(title = "Winning Parties in Municipalities",
x = "Year", y = "Number of Municipalities", fill = "Party") +
theme_minimal()
print(winners_plot)
#maybe we can add regional analysis
regional_summary <- big_municipalities |>
group_by(codigo_ccaa, partido_2, anno) |>
summarise(total_municipalities = n(), .groups = "drop") |>
arrange(desc(total_municipalities))
ggplot(regional_summary, aes(x = anno, y = total_municipalities, color = partido_2)) +
geom_line(linewidth = 1.2) +
facet_wrap(~codigo_ccaa) +
labs(title = "Regional Performance of Parties Over Time",
x = "Year", y = "Number of Municipalities", color = "Party") +
theme_minimal()
gert::git_add(".")
gert::git_commit(message = "I uploaded first question")
gert::git_push()
gert::git_push()
gert::git_push()
Sys.setlocale("LC_ALL", "en_US.UTF-8")
setwd("C:/Users/Casper/Desktop/group (1)/group/Data_Programming_Group_Project.git")
gert::git_pull()
